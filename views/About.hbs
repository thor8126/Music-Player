


<h1>Song Search</h1>
<form id="search-form input-group" method="GET">
    <input type="text" id="search-input" name="q" required>
    <button type="submit" id="submit">Search</button>
</form>
<audio id="audio-player" controls></audio>
<div id="search-results"></div>



<script>
    const form = document.querySelector('#search-form');
    const results = document.querySelector('#search-results');
    let audioPlayer = document.querySelector('#audio-player');

    form.addEventListener('submit', event => {
        event.preventDefault();
        const query = document.querySelector('#search-input').value;
        fetch(`/search?q=${encodeURIComponent(query)}`)
            .then(response => response.json())
            .then(tracks => {
                results.innerHTML = '';
                for (const track of tracks) {
                    const trackElement = document.createElement('div');
                    const playButton = document.createElement('button');
                    playButton.innerText = 'Play';
                    playButton.addEventListener('click', () => {
                        audioPlayer.src = track.preview_url;
                        audioPlayer.play();
                    });
                    trackElement.innerHTML = `<h2>${track.name}</h2><p>by ${track.artists[0].name}</p>`;
                    trackElement.appendChild(playButton);
                    results.appendChild(trackElement);
                }
            })
            .catch(error => {
                console.error(error);
                results.innerHTML = '<p>There was an error searching for tracks.</p>';
            });
    });

    // Add event listeners to control the audio player
    document.querySelector('#play').addEventListener('click', () => {
        audioPlayer.play();
    });

    

    document.querySelector('#volume').addEventListener('input', event => {
        audioPlayer.volume = event.target.value;
    });
</script>